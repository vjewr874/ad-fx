(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[13],{1312:function(e,s,a){"use strict";a.r(s);var o=a(1),t=a(15),i=a(0),r=(a(625),a(477)),n=a(448),l=a(459),c=a(1276),d=a(475),u=a(458),m=a(1268),p=a(1278),v=a(1347),f=a(445),b=a(114),N=a(6);s.default=function(e){var s=e.match.params?e.match.params.id:null,a=Object(r.g)(),h=Object(i.useState)({roleName:"",permissions:[]}),O=Object(t.a)(h,2),j=O[0],g=O[1],T=Object(i.useState)([]),x=Object(t.a)(T,2),y=x[0],E=x[1];Object(i.useEffect)((function(){if(H(),s){var a,t,i,r=(null===e||void 0===e||null===(a=e.location)||void 0===a||null===(t=a.state)||void 0===t?void 0:t.data)||{};j.roleName=r.roleName,j.permissions=null===(i=r.permissions)||void 0===i?void 0:i.split(","),g(Object(o.a)({},j))}}),[]);var H=function(){var e=window.localStorage.getItem("accessToken");if(e){var s=e.replace(/"/g,"");n.a.send({method:"POST",path:"/Permission/getList",data:{skip:0,limit:100},query:null,headers:{Authorization:"Bearer "+s}}).then((function(e){if(e){var s=e.statusCode,a=e.data;200===s?E(a.data):b.c.warn("\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra!")}}))}else window.localStorage.clear()};return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"#AddEditPermission",children:Object(N.jsx)(l.a,{className:"p-2",children:Object(N.jsx)(c.a,{children:Object(N.jsxs)(d.a,{children:[Object(N.jsx)(u.a,{lg:4,className:"mb-2",children:Object(N.jsx)(m.a,{children:Object(N.jsx)(p.a,{onChange:function(e){var s=e.target.value;j.roleName=s,g(Object(o.a)({},j))},value:j.roleName||"",type:"text",id:"roleName",placeholder:"Nh\u1eadp vai tr\xf2"})})}),Object(N.jsx)(u.a,{lg:12,children:Object(N.jsxs)("div",{className:"border",children:[Object(N.jsx)("h6",{className:"py-1 mx-1 mb-0 font-medium-2",children:"Th\xeam Quy\u1ec1n"}),Object(N.jsx)(d.a,{children:y.map((function(e,s){if("VIEW_ROLES"!==e.permissionKey){var a,t=null===j||void 0===j||null===(a=j.permissions)||void 0===a?void 0:a.includes(e.permissionKey);return Object(N.jsx)(u.a,{lg:3,children:Object(N.jsx)(v.a,{onChange:function(s){s.target.checked&&!t?((null===j||void 0===j?void 0:j.permissions)||(j.permissions=[]),j.permissions.push(null===e||void 0===e?void 0:e.permissionKey)):((null===j||void 0===j?void 0:j.permissions)||(j.permissions=[]),j.permissions=j.permissions.filter((function(s){return s!==(null===e||void 0===e?void 0:e.permissionKey)}))),g(Object(o.a)({},j))},className:"m-1",type:"checkbox",checked:t,id:e.permissionKey,label:(i=e.permissionName,"VIEW_DASHBOARD"===i?"TH\u1ed0NG K\xca":"VIEW_PRODUCTS"===i?"DANH S\xc1CH V\xc9 B\xc1N":"VIEW_ORDERS"===i?"DANH S\xc1CH \u0110\u01a0N MUA":"VIEW_USERS"===i?"DANH S\xc1CH KH\xc1CH H\xc0NG":"VIEW_DEPOSIT"===i?"L\u1ecaCH S\u1eec N\u1ea0P":"VIEW_WITHDRAW"===i?"L\u1ecaCH S\u1eec R\xdaT":"VIEW_TRANSACTION"===i?"L\u1ecaCH S\u1eec GIAO D\u1ecaCH":"VIEW_NOTIFICATIONS"===i?"TH\xd4NG B\xc1O":"VIEW_PAYMENT_METHOD"===i?"PH\u01af\u01a0NG TH\u1ee8C THANH TO\xc1N":"VIEW_SYSTEM_CONFIG"===i?"C\u1ea4U H\xccNH H\u1ec6 TH\u1ed0NG":"VIEW_ROLES"===i?"PH\xc2N QUY\u1ec0N":"VIEW_STAFFS"===i?"DANH S\xc1CH NH\xc2N VI\xcaN":"APPROVE_DEPOSIT"===i?"DUY\u1ec6T N\u1ea0P TI\u1ec0N":"APPROVE_WITHDRAW"===i?"DUY\u1ec6T R\xdaT TI\u1ec0N":"EDIT_USERS"===i?"CH\u1ec8NH S\u1eecA NG\u01af\u1edcI D\xd9NG":i)})},s)}var i}))})]})})]})})})}),Object(N.jsxs)("div",{className:"d-flex justify-content-end align-items-center",children:[Object(N.jsx)(f.a,{color:"primary",className:"mr-2",onClick:function(){return a.push("/permission/list")},children:"Tr\u1edf l\u1ea1i"}),Object(N.jsx)(f.a,{onClick:function(){!function(){var e,o,t=window.localStorage.getItem("accessToken"),i="/Role/insert",r=null===j||void 0===j||null===(e=j.permissions)||void 0===e?void 0:e.join(","),l={roleName:j.roleName,permissions:r};if(s&&(i="/Role/updateById",l={id:s,data:{roleName:j.roleName,permissions:r,isDeleted:0}}),"admin"!==(null===j||void 0===j||null===(o=j.roleName)||void 0===o?void 0:o.toLowerCase())){if(""===j.roleName||void 0===j.roleName)return b.c.warn("Vui l\xf2ng nh\u1eadp t\xean vai tr\xf2");if(0===(null===j||void 0===j?void 0:j.permissions.length)||(null===j||void 0===j?void 0:j.permissions)===[]||""===(null===j||void 0===j?void 0:j.permissions))return b.c.warn("Vui l\xf2ng ch\u1ecdn quy\u1ec1n");if(t){var c=t.replace(/"/g,"");n.a.send({method:"POST",path:i,data:l,query:null,headers:{Authorization:"Bearer "+c}}).then((function(e){if(e){var o=e.statusCode;200===o||201===o?b.c.success("".concat(s?"C\u1eadp nh\u1eadt":"T\u1ea1o"," th\xe0nh c\xf4ng")):b.c.warn("\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra!"),a.push("/permission/list")}}))}else window.localStorage.clear()}else b.c.warn("Kh\xf4ng \u0111\u1eb7t t\xean v\xe0i tr\xf2 l\xe0 Admin")}()},className:"mb-1 mb-sm-0 mr-0",type:"submit",color:"primary",children:s?"L\u01b0u":"T\u1ea1o"})]})]})}},458:function(e,s,a){"use strict";var o=a(14),t=a(20),i=a(0),r=a.n(i),n=a(5),l=a.n(n),c=a(55),d=a.n(c),u=a(77),m=l.a.oneOfType([l.a.number,l.a.string]),p=l.a.oneOfType([l.a.bool,l.a.number,l.a.string,l.a.shape({size:l.a.oneOfType([l.a.bool,l.a.number,l.a.string]),order:m,offset:m})]),v={tag:u.q,xs:p,sm:p,md:p,lg:p,xl:p,className:l.a.string,cssModule:l.a.object,widths:l.a.array},f={tag:"div",widths:["xs","sm","md","lg","xl"]},b=function(e,s,a){return!0===a||""===a?e?"col":"col-"+s:"auto"===a?e?"col-auto":"col-"+s+"-auto":e?"col-"+a:"col-"+s+"-"+a},N=function(e){var s=e.className,a=e.cssModule,i=e.widths,n=e.tag,l=Object(t.a)(e,["className","cssModule","widths","tag"]),c=[];i.forEach((function(s,o){var t=e[s];if(delete l[s],t||""===t){var i=!o;if(Object(u.k)(t)){var r,n=i?"-":"-"+s+"-",m=b(i,s,t.size);c.push(Object(u.m)(d()(((r={})[m]=t.size||""===t.size,r["order"+n+t.order]=t.order||0===t.order,r["offset"+n+t.offset]=t.offset||0===t.offset,r)),a))}else{var p=b(i,s,t);c.push(p)}}})),c.length||c.push("col");var m=Object(u.m)(d()(s,c),a);return r.a.createElement(n,Object(o.a)({},l,{className:m}))};N.propTypes=v,N.defaultProps=f,s.a=N},459:function(e,s,a){"use strict";var o=a(14),t=a(20),i=a(0),r=a.n(i),n=a(5),l=a.n(n),c=a(55),d=a.n(c),u=a(77),m={tag:u.q,inverse:l.a.bool,color:l.a.string,body:l.a.bool,outline:l.a.bool,className:l.a.string,cssModule:l.a.object,innerRef:l.a.oneOfType([l.a.object,l.a.string,l.a.func])},p=function(e){var s=e.className,a=e.cssModule,i=e.color,n=e.body,l=e.inverse,c=e.outline,m=e.tag,p=e.innerRef,v=Object(t.a)(e,["className","cssModule","color","body","inverse","outline","tag","innerRef"]),f=Object(u.m)(d()(s,"card",!!l&&"text-white",!!n&&"card-body",!!i&&(c?"border":"bg")+"-"+i),a);return r.a.createElement(m,Object(o.a)({},v,{className:f,ref:p}))};p.propTypes=m,p.defaultProps={tag:"div"},s.a=p},475:function(e,s,a){"use strict";var o=a(14),t=a(20),i=a(0),r=a.n(i),n=a(5),l=a.n(n),c=a(55),d=a.n(c),u=a(77),m=l.a.oneOfType([l.a.number,l.a.string]),p={tag:u.q,noGutters:l.a.bool,className:l.a.string,cssModule:l.a.object,form:l.a.bool,xs:m,sm:m,md:m,lg:m,xl:m},v={tag:"div",widths:["xs","sm","md","lg","xl"]},f=function(e){var s=e.className,a=e.cssModule,i=e.noGutters,n=e.tag,l=e.form,c=e.widths,m=Object(t.a)(e,["className","cssModule","noGutters","tag","form","widths"]),p=[];c.forEach((function(s,a){var o=e[s];if(delete m[s],o){var t=!a;p.push(t?"row-cols-"+o:"row-cols-"+s+"-"+o)}}));var v=Object(u.m)(d()(s,i?"no-gutters":null,l?"form-row":"row",p),a);return r.a.createElement(n,Object(o.a)({},m,{className:v}))};f.propTypes=p,f.defaultProps=v,s.a=f},625:function(e,s,a){}}]);
//# sourceMappingURL=13.71d9fa0d.chunk.js.map