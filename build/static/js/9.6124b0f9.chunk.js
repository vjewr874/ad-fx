(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[9],{1240:function(e,t,n){},1241:function(e,t,n){},1248:function(e,t){},1249:function(e,t){},1250:function(e,t){},1251:function(e,t){},1252:function(e,t){},621:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(452),i=n.n(a),l=n(453),c=n(115),r=n(116),o=n(448),u=function(){function e(){Object(c.a)(this,e)}return Object(r.a)(e,null,[{key:"createProduct",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t,n=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.abrupt("return",new Promise((function(e,n){o.a.send({method:"POST",path:"/Product/insert",data:t}).then((function(t){var a=t.statusCode,i=t.error;200===a?e(t):n(new Error(i))})).catch((function(e){n(e)}))})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"updateProduct",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t,n=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.abrupt("return",new Promise((function(e,n){o.a.send({method:"POST",path:"/Product/updateById",data:t}).then((function(t){var a=t.statusCode,i=t.error;200===a?e(t):n(new Error(i))})).catch((function(e){n(e)}))})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"detailProduct",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t,n=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.abrupt("return",new Promise((function(e,n){o.a.send({method:"POST",path:"/Product/findById",data:t}).then((function(t){var a=t.statusCode,i=t.error;200===a?e(t):n(new Error(i))})).catch((function(e){n(e)}))})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"uploadImage",value:function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){o.a.send({method:"POST",path:"/Upload/uploadMediaFile",data:t}).then((function(t){var n=t.statusCode,a=t.data,i=t.message;if(200!==n)throw new Error(i);e(a)})).catch((function(e){n(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}()},626:function(e,t,n){"use strict";var a=n(452),i=n.n(a),l=n(118),c=n(453),r=n(15),o=n(0),u=n(459),s=n(475),d=n(458),v=n(1268),b=n(1277),h=n(1278),p=n(445),f=n(476),j=n.n(f),g=(n(485),n(467)),m=(n(1240),n(557)),x=n(1347),O=n.p+"static/media/ic-close.d4172e89.svg",N=n.p+"static/media/img-pictures.4ca53b4a.png",I=n(710),y=n(6),w=function(e){var t;return Object(y.jsxs)("div",{id:"render-image",children:[!(null===e||void 0===e?void 0:e.disabled)&&Object(y.jsx)(m.a,{className:"flex-column flex-md-row",children:Object(y.jsx)(m.a,{body:!0,children:Object(y.jsxs)("div",{className:"d-inline-block input-add-image d-flex justify-content-between align-items-end",children:[Object(y.jsxs)("div",{className:"d-flex",children:[Object(y.jsxs)(v.a,{className:"mb-0 position-relative",style:{marginTop:50,marginRight:20},children:[Object(y.jsx)(x.a,{label:"T\u1ea3i h\xecnh",type:"file",id:"exampleCustomFileBrowser",name:"customFile",onChange:e.onChangeImage,multiple:"multiple",accept:".jpg, .png, .jpeg"}),Object(y.jsxs)("p",{className:"content-input",children:[Object(y.jsx)(I.a,{size:17,style:{marginTop:"-2px",marginRight:"10px"}}),"T\u1ea3i h\xecnh"]})]}),Object(y.jsxs)(v.a,{className:"mb-0 position-relative",style:{marginTop:50},children:[Object(y.jsx)(x.a,{label:"T\u1ea3i h\xecnh",type:"file",id:"exampleCustomFileBrowser",name:"customFile",onChange:e.onChangePdf,multiple:"multiple",accept:"application/pdf"}),Object(y.jsxs)("p",{className:"content-input",children:[Object(y.jsx)(I.a,{size:17,style:{marginTop:"-2px",marginRight:"10px"}}),"T\u1ea3i PDF"]})]})]}),Object(y.jsxs)("p",{children:["S\u1ed1 l\u01b0\u1ee3ng: ",null===e||void 0===e||null===(t=e.productImage)||void 0===t?void 0:t.length]})]})})}),Object(y.jsx)("div",{className:"container-image",children:Object(y.jsxs)(s.a,{className:0===e.productImage.length?"justify-content-center":"",children:[e.productImage.length>0&&e.productImage.map((function(t,n){return Object(y.jsx)(d.a,{xs:3,children:Object(y.jsxs)("div",{className:"image__lottery",children:[!(null===e||void 0===e?void 0:e.disabled)&&Object(y.jsx)("img",{className:"image-close",src:O,alt:"",onClick:function(){return null===e||void 0===e?void 0:e.handleRemoveImage(n)}}),Object(y.jsx)("div",{className:"image",style:{backgroundImage:"url('".concat((null===t||void 0===t?void 0:t.productImageUrl)||t,"')")}})]})},n)})),0===e.productImage.length&&Object(y.jsx)(d.a,{xs:3,children:Object(y.jsx)("div",{className:"image__lottery",children:Object(y.jsx)("div",{className:"image",style:{backgroundImage:"url('".concat(N,"')"),backgroundSize:"contain",backgroundPosition:"center"}})})})]})})]})},C="TPHCM",k="DONG_THAP",T="CA_MAU",P="BEN_TRE",D="VUNG_TAU",G="BAC_LIEU",A="DONG_NAI",H="CAN_THO",S="SOC_TRANG",_="TAY_NINH",E="AN_GIANG",L="BINH_THUAN",U="VINH_LONG",Y="BINH_DUONG",B="TRA_VINH",M="LONG_AN",R="HAU_GIANG",V="BINH_PHUOC",F="TIEN_GIANG",q="KIEN_GIANG",z="DA_LAT",Q=n(114),J=n(621),K=n(477),X=(n(1241),n(468)),W=n(451),Z=n.n(W),$=n(1242),ee=(n(1253),[{label:"V\xe9 th\u01b0\u1eddng",value:"SINGLE"},{label:"V\xe9 c\u1eb7p nguy\xean",value:"BATCH"}]);t.a=function(e){var t,n=Object(o.useState)(null),a=Object(r.a)(n,2),f=a[0],m=a[1],x=Object(o.useState)(1),O=Object(r.a)(x,2),N=O[0],I=O[1],W=Object(o.useState)("SINGLE"),te=Object(r.a)(W,2),ne=te[0],ae=te[1],ie=Object(o.useState)(null),le=Object(r.a)(ie,2),ce=le[0],re=le[1],oe=Object(o.useState)([]),ue=Object(r.a)(oe,2),se=ue[0],de=ue[1],ve=Object(o.useState)(""),be=Object(r.a)(ve,2),he=be[0],pe=be[1],fe=(new Date).getHours()>16?Z()(new Date((new Date).getTime()+864e5)).format("YYYY-MM-DD 07:00:00.000"):(new Date).getHours()<16?Z()(new Date).format("YYYY-MM-DD 07:00:00.000"):(new Date).getMinutes()>15?Z()(new Date((new Date).getTime()+864e5)).format("YYYY-MM-DD 07:00:00.000"):Z()(new Date).format("YYYY-MM-DD 07:00:00.000"),je=Object(o.useState)([]),ge=Object(r.a)(je,2),me=ge[0],xe=ge[1],Oe=Object(K.g)(),Ne=Object(o.useState)(void 0),Ie=Object(r.a)(Ne,2),ye=Ie[0],we=Ie[1],Ce=Object(o.useState)(void 0),ke=Object(r.a)(Ce,2),Te=ke[0],Pe=ke[1],De=Object(o.useState)(void 0),Ge=Object(r.a)(De,2),Ae=Ge[0],He=Ge[1];Object(o.useEffect)((function(){var t,n,a,i,l,c,r,o,u;m(null===e||void 0===e||null===(t=e.lotteryInfo)||void 0===t?void 0:t.productTitle),I((null===e||void 0===e||null===(n=e.lotteryInfo)||void 0===n?void 0:n.quantity)||1),ae((null===e||void 0===e||null===(a=e.lotteryInfo)||void 0===a?void 0:a.productType)||"SINGLE"),re(null===e||void 0===e||null===(i=e.lotteryInfo)||void 0===i?void 0:i.productChannel),de((null===e||void 0===e||null===(l=e.lotteryInfo)||void 0===l?void 0:l.productImages)||[]),we(Se(null===e||void 0===e||null===(c=e.lotteryInfo)||void 0===c?void 0:c.productImages)),pe(fe),Pe((null===e||void 0===e||null===(r=e.lotteryInfo)||void 0===r?void 0:r.stockQuantity)||"0"),He(parseInt(null===e||void 0===e||null===(o=e.lotteryInfo)||void 0===o?void 0:o.price)/parseInt(null===e||void 0===e||null===(u=e.lotteryInfo)||void 0===u?void 0:u.quantity))}),[null===e||void 0===e?void 0:e.lotteryInfo]),Object(o.useEffect)((function(){var t;He(null===e||void 0===e||null===(t=e.infoPrice)||void 0===t?void 0:t.ticketPrice)}),[null===e||void 0===e||null===(t=e.infoPrice)||void 0===t?void 0:t.ticketPrice]);var Se=function(e){var t=[];return(null===e||void 0===e?void 0:e.length)>0&&(null===e||void 0===e||e.forEach((function(e){t.push(e.productImageUrl)}))),t};function _e(e){J.a.createProduct(e).then((function(e){if(e){var t=e.statusCode,n=e.message;200===t?(Q.c.success("T\u1ea1o m\u1edbi th\xe0nh c\xf4ng"),Oe.push("/lottery/list")):Q.c.warn(n||"\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra!")}}))}var Ee=function(t){J.a.updateProduct(t).then((function(t){if(t){var n=t.statusCode,a=t.message;200===n?(Q.c.success("C\u1eadp nh\u1eadt v\xe9 s\xf4 th\xe0nh c\xf4ng"),Oe.push("/lottery/detail/".concat(e.id))):Q.c.warn(a||"\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra!")}}))},Le=function(e,t){var n,a,i,l;switch(t){case"productTitle":m(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value);break;case"quantity":I(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value);break;case"stockQuantity":Pe(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value);break;case"pricePerLottery":He(null===e||void 0===e||null===(l=e.target)||void 0===l?void 0:l.value)}},Ue=function(e){return new Promise((function(t,n){var a=new FileReader;a.onload=function(e){t(e.target.result)},a.onerror=function(e){n(e)},a.readAsDataURL(e)}))},Ye=function(e){var t=document.createElement("canvas"),n=t.getContext("2d"),a=new Image;return a.src=e,new Promise((function(e){a.onload=function(){t.setAttribute("width",a.height),t.setAttribute("height",a.width),n.rotate(270*Math.PI/180),n.drawImage(a,-1*a.width,0),e(t.toDataURL())}}))},Be=function(){var t=Object(c.a)(i.a.mark((function t(n){var a,c,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==(a=n.target.files).length)for(c=function(t){var n=a[t].type.replace("image/","");"jpg"===n||"png"===n||"jpeg"===n?Object(X.a)(a[t]).then((function(n){var i=n.replace(/,/gi,"").split("base64");if(i[1]){var c={imageData:i[1],imageFormat:a[t].type.replace("image/","")};if(a[t].size>10048576)return;J.a.uploadImage(c).then((function(t){t&&(se.push(t),ye.push(t),de(Object(l.a)(se)),we(Object(l.a)(ye)),(null===e||void 0===e?void 0:e.id)||Pe(null===se||void 0===se?void 0:se.length))}))}})):Q.c.warn("C\xf3 file kh\xf4ng l\xe0 h\xecnh \u1ea3nh")},r=0;r<(null===a||void 0===a?void 0:a.length);r++)c(r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Object(o.useEffect)((function(){!function(){switch(new Date(he||fe).getDay()){case 0:xe([{label:"Ch\u1ecdn t\xean \u0111\xe0i",value:void 0},{label:"TI\u1ec0N GIANG",value:F},{label:"KI\xcaN GIANG",value:q},{label:"\u0110\xc0 L\u1ea0T",value:z}]);break;case 1:xe([{label:"Ch\u1ecdn t\xean \u0111\xe0i",value:void 0},{label:"TP.HCM",value:C},{label:"\u0110\u1ed2NG TH\xc1P",value:k},{label:"C\xc0 MAU",value:T}]);break;case 2:xe([{label:"Ch\u1ecdn t\xean \u0111\xe0i",value:void 0},{label:"B\u1ebeN TRE",value:P},{label:"V\u0168NG T\xc0U",value:D},{label:"B\u1ea0C LI\xcaU",value:G}]);break;case 3:xe([{label:"Ch\u1ecdn t\xean \u0111\xe0i",value:void 0},{label:"\u0110\u1ed2NG NAI",value:A},{label:"C\u1ea6N TH\u01a0",value:H},{label:"S\xd3C TR\u0102NG",value:S}]);break;case 4:xe([{label:"Ch\u1ecdn t\xean \u0111\xe0i",value:void 0},{label:"T\xc2Y NINH",value:_},{label:"AN GIANG",value:E},{label:"B\xccNH THU\u1eacN",value:L}]);break;case 5:xe([{label:"Ch\u1ecdn t\xean \u0111\xe0i",value:void 0},{label:"V\u0128NH LONG",value:U},{label:"B\xccNH D\u01af\u01a0NG",value:Y},{label:"TR\xc0 VINH",value:B}]);break;case 6:xe([{label:"Ch\u1ecdn t\xean \u0111\xe0i",value:void 0},{label:"TP.HCM",value:C},{label:"LONG AN",value:M},{label:"H\u1eacU GIANG",value:R},{label:"B\xccNH PH\u01af\u1edaC",value:V}])}}()}),[he]);var Me=function(){var t=Object(c.a)(i.a.mark((function t(n){var a,c,r,o,u,s,d,v,b,h,p,f;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0===(a=n.target.files).length){t.next=48;break}c=0;case 3:if(!(c<(null===a||void 0===a?void 0:a.length))){t.next=48;break}if("application/pdf"!==a[c].type){t.next=44;break}return t.next=7,Ue(a[c]);case 7:return r=t.sent,t.next=10,$.getDocument(r).promise;case 10:o=t.sent,u=document.createElement("canvas"),s=0;case 13:if(!(s<o.numPages)){t.next=41;break}return t.next=16,o.getPage(s+1);case 16:return d=t.sent,v=d.getViewport({scale:1}),b=u.getContext("2d"),u.height=v.height,u.width=v.width,t.next=23,d.render({canvasContext:b,viewport:v}).promise;case 23:if(h=void 0,!(u.width<u.height)){t.next=31;break}return t.next=27,Ye(u.toDataURL());case 27:p=t.sent,h=p.replace(/,/gi,"").split("base64"),t.next=32;break;case 31:h=u.toDataURL().replace(/,/gi,"").split("base64");case 32:if(!h[1]){t.next=38;break}if(f={imageData:h[1],imageFormat:"png"},!(r.size>10048576)){t.next=37;break}return Q.c.warn("Dung l\u01b0\u1ee3ng file qu\xe1 l\u1edbn"),t.abrupt("return");case 37:J.a.uploadImage(f).then((function(t){t&&(se.push(t),ye.push(t),de(Object(l.a)(se)),we(Object(l.a)(ye)),(null===e||void 0===e?void 0:e.id)||Pe(null===se||void 0===se?void 0:se.length))}));case 38:s++,t.next=13;break;case 41:u.remove(),t.next=45;break;case 44:Q.c.warn("C\xf3 file kh\xf4ng l\xe0 pdf");case 45:c++,t.next=3;break;case 48:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(y.jsxs)("div",{className:"lottery-info-custom",children:[Object(y.jsxs)(u.a,{className:"p-2",children:[Object(y.jsx)("h3",{className:"detail-title mb-2",children:null===e||void 0===e?void 0:e.title}),Object(y.jsxs)(s.a,{className:"detail-input",children:[Object(y.jsx)(d.a,{xs:4,children:Object(y.jsxs)(v.a,{children:[Object(y.jsx)(b.a,{children:"B\u1ed9 s\u1ed1"}),Object(y.jsx)(h.a,{className:"custom-input-pj",type:"text",placeholder:"Nh\u1eadp b\u1ed9 s\u1ed1",onChange:function(e){return Le(e,"productTitle")},value:f||"",disabled:null===e||void 0===e?void 0:e.disabled})]})}),Object(y.jsx)(d.a,{xs:4,children:Object(y.jsxs)(v.a,{children:[Object(y.jsx)(b.a,{children:"T\xean \u0111\xe0i"}),Object(y.jsx)(g.a,{isClearable:!1,className:"react-select",classNamePrefix:"select",options:me,placeholder:"Ch\u1ecdn t\xean \u0111\xe0i",value:null===me||void 0===me?void 0:me.find((function(e){return e.value===ce})),onChange:function(e){return function(e){re(null===e||void 0===e?void 0:e.value)}(e)},isDisabled:null===e||void 0===e?void 0:e.disabled})]})}),Object(y.jsx)(d.a,{xs:4,children:Object(y.jsxs)(v.a,{children:[Object(y.jsx)(b.a,{children:"Ng\xe0y X\u1ed5"}),Object(y.jsx)(j.a,{defaultValue:fe,options:{minDate:fe},id:"startDate",className:"form-control ".concat((null===e||void 0===e?void 0:e.disabled)?"":"form-control__date"," custom-flatpickr-pj"),onChange:function(e,t){return function(e,t){re(void 0),pe(t)}(0,t)},disabled:null===e||void 0===e?void 0:e.disabled})]})}),Object(y.jsx)(d.a,{xs:4,children:Object(y.jsxs)(v.a,{children:[Object(y.jsx)(b.a,{children:"Lo\u1ea1i v\xe9"}),Object(y.jsx)(g.a,{isClearable:!1,className:"react-select",classNamePrefix:"select",options:ee,placeholder:"Ch\u1ecdn lo\u1ea1i v\xe9",value:null===ee||void 0===ee?void 0:ee.find((function(e){return e.value===ne})),onChange:function(e){return function(e){ae(null===e||void 0===e?void 0:e.value),"SINGLE"===e.value?I(1):I(110)}(e)},isDisabled:null===e||void 0===e?void 0:e.disabled})]})}),"BATCH"===ne&&Object(y.jsx)(d.a,{xs:4,children:Object(y.jsxs)(v.a,{children:[Object(y.jsx)(b.a,{children:"S\u1ed1 l\u01b0\u1ee3ng v\xe9 / c\u1ed9c v\xe9"}),Object(y.jsx)(h.a,{className:"custom-input-pj",type:"number",onChange:function(e){return Le(e,"quantity")},value:N||"",disabled:null===e||void 0===e?void 0:e.disabled})]})}),Object(y.jsx)(d.a,{xs:4,children:Object(y.jsxs)(v.a,{children:[Object(y.jsx)(b.a,{children:"S\u1ed1 l\u01b0\u1ee3ng v\xe9 t\u1ed3n kho"}),Object(y.jsx)(h.a,{className:"custom-input-pj",type:"number",onChange:function(e){return Le(e,"stockQuantity")},value:Te||"",disabled:null===e||void 0===e?void 0:e.id})]})}),Object(y.jsx)(d.a,{xs:4,children:Object(y.jsxs)(v.a,{children:[Object(y.jsx)(b.a,{children:"Gi\xe1 ti\u1ec1n 1 v\xe9"}),Object(y.jsx)(h.a,{className:"custom-input-pj",type:"number",placeholder:"Gi\xe1 ti\u1ec1n 1 v\xe9",onChange:function(e){return Le(e,"pricePerLottery")},value:Ae||"",disabled:null===e||void 0===e?void 0:e.disabled})]})})]}),Object(y.jsx)(w,{onChangeImage:Be,onChangePdf:Me,productImage:se,handleRemoveImage:function(t){se.splice(t,1),de(Object(l.a)(se)),ye.splice(t,1),we(Object(l.a)(ye)),(null===e||void 0===e?void 0:e.id)||Pe(null===se||void 0===se?void 0:se.length)},disabled:null===e||void 0===e?void 0:e.disabled})]}),Object(y.jsxs)("div",{className:"d-flex justify-content-end align-items-center",children:[Object(y.jsx)(p.a,{color:"primary",className:"mr-2",onClick:function(){return Oe.go(-1)},children:"Tr\u1edf l\u1ea1i"}),!(null===e||void 0===e?void 0:e.disabled)&&Object(y.jsx)(p.a,{color:"primary",type:"button",onClick:function(){return function(){if(f)if(N)if(ce)if(ne)if(he)if(Te)if(Ae)if(null===e||void 0===e?void 0:e.id){var t={id:parseInt(null===e||void 0===e?void 0:e.id),data:{productTitle:f,productChannel:ce,productType:ne,quantity:parseInt(N),stockQuantity:Te,price:Ae*parseInt(N),expireDate:he,productImages:ye||void 0}};"SINGLE"===ne?parseInt(Te)!==ye.length?Q.c.warn("S\u1ed1 l\u01b0\u1ee3ng \u1ea3nh v\xe0 s\u1ed1 l\u01b0\u1ee3ng v\xe9 kh\xf4ng kh\u1edbp"):Ee(t):parseInt(Te)!==ye.length?Q.c.warn("S\u1ed1 l\u01b0\u1ee3ng \u1ea3nh v\xe0 s\u1ed1 l\u01b0\u1ee3ng v\xe9 t\u1ed3n kh\xf4ng kh\u1edbp)"):Ee(t)}else{var n={productTitle:f,quantity:parseInt(N),productChannel:ce,productType:ne,stockQuantity:Te,price:Ae*parseInt(N),expireDate:he,productImages:se||void 0};parseInt(Te)!==se.length?Q.c.warn("S\u1ed1 l\u01b0\u1ee3ng \u1ea3nh v\xe0 s\u1ed1 l\u01b0\u1ee3ng v\xe9 t\u1ed3n kh\xf4ng kh\u1edbp"):_e(n)}else Q.c.warn("Gi\xe1 ti\u1ec1n 1 v\xe9");else Q.c.warn("Vui l\xf2ng S\u1ed1 l\u01b0\u1ee3ng v\xe9 t\u1ed3n kho");else Q.c.warn("Vui l\xf2ng ch\u1ecdn ng\xe0y x\u1ed5");else Q.c.warn("Vui l\xf2ng ch\u1ecdn lo\u1ea1i v\xe9");else Q.c.warn("Vui l\xf2ng ch\u1ecdn t\xean \u0111\xe0i");else Q.c.warn("Vui l\xf2ng nh\u1eadp s\u1ed1 l\u01b0\u1ee3ng v\xe9/ c\u1ed9c v\xe9");else Q.c.warn("Vui l\xf2ng nh\u1eadp b\u1ed9 s\u1ed1")}()},children:(null===e||void 0===e?void 0:e.id)?"C\u1eadp nh\u1eadt":"L\u01b0u"})]})]})}},829:function(e,t){}}]);
//# sourceMappingURL=9.6124b0f9.chunk.js.map